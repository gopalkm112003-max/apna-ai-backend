<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apna AI Professional Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* CSS Settings */
        :root {
            --bg: #f8f9fa; --panel: #ffffff; --text: #212529; --primary: #007bff; --ai-bubble: #f1f3f5;
        }
        [data-theme="dark"] {
            --bg: #121212; --panel: #1e1e1e; --text: #e9ecef; --primary: #375a7f; --ai-bubble: #2c2c2c;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; height: 100vh; transition: 0.3s; }
        
        header { background: var(--panel); padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .theme-toggle { cursor: pointer; border: 1px solid var(--primary); background: transparent; color: var(--primary); padding: 6px 12px; border-radius: 8px; font-weight: 600; }

        #chat-area { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .bubble { max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 15px; line-height: 1.5; word-wrap: break-word; }
        .user { align-self: flex-end; background: var(--primary); color: white; border-bottom-right-radius: 4px; }
        .ai { align-self: flex-start; background: var(--ai-bubble); color: var(--text); border-bottom-left-radius: 4px; }

        footer { background: var(--panel); padding: 20px; border-top: 1px solid rgba(0,0,0,0.1); }
        .input-grp { max-width: 900px; margin: auto; display: flex; gap: 10px; }
        input { flex: 1; padding: 12px 18px; border-radius: 25px; border: 1px solid #ccc; background: var(--bg); color: var(--text); outline: none; }
        button#send { background: var(--primary); color: white; border: none; padding: 10px 25px; border-radius: 25px; cursor: pointer; font-weight: bold; }
        .status { text-align: center; font-size: 11px; margin-top: 8px; color: #888; }
    </style>
</head>
<body data-theme="light">

<header>
    <div style="font-size: 1.2rem; font-weight: bold;">üöÄ AI Assistant 2026</div>
    <button class="theme-toggle" onclick="toggleTheme()">üåô Dark Mode</button>
</header>

<div id="chat-area">
    <div class="bubble ai">Namaste! Main aapki kaise madad kar sakta hoon?</div>
</div>

<footer>
    <div class="input-grp">
        <input type="text" id="userInput" placeholder="Yahan sawal likhein..." autocomplete="off">
        <button id="send">Send</button>
    </div>
    <div class="status" id="modelStatus">Model: Auto-selecting...</div>
</footer>

<script>
    const API_KEY = "AIzaSyA_qpBdn1AHPXjRa-8M8FRPcdwIfoQyBJw";
    
    // 2026 ke liye sabse stable models ki list
    const MODELS = [
        "gemini-1.5-flash", 
        "gemini-2.0-flash", 
        "gemini-2.5-flash",
        "gemini-3-flash-preview"
    ];

    let currentModelIndex = 0;
    const chatArea = document.getElementById('chat-area');
    const input = document.getElementById('userInput');
    const sendBtn = document.getElementById('send');
    const modelStatus = document.getElementById('modelStatus');

    function toggleTheme() {
        const body = document.body;
        const isDark = body.getAttribute('data-theme') === 'dark';
        body.setAttribute('data-theme', isDark ? 'light' : 'dark');
        document.querySelector('.theme-toggle').innerText = isDark ? "üåô Dark Mode" : "‚òÄÔ∏è Light Mode";
    }

    function addBubble(role, text) {
        const div = document.createElement('div');
        div.className = `bubble ${role}`;
        div.innerText = text;
        chatArea.appendChild(div);
        chatArea.scrollTop = chatArea.scrollHeight;
        return div;
    }

    async function fetchAI(prompt) {
        // Hum v1beta use karenge kyunki ye naye models ko support karta hai
        const activeModel = MODELS[currentModelIndex];
        modelStatus.innerText = `Trying Model: ${activeModel}...`;
        
        const url = `https://generativelanguage.googleapis.com/v1beta/models/${activeModel}:generateContent?key=${API_KEY}`;

        try {
            const response = await fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });

            const data = await response.json();

            if (!response.ok) {
                // Agar model nahi mila, toh agla model try karein
                if (currentModelIndex < MODELS.length - 1) {
                    currentModelIndex++;
                    return await fetchAI(prompt);
                }
                throw new Error(data.error.message);
            }

            modelStatus.innerText = `Connected via ${activeModel}`;
            return data.candidates[0].content.parts[0].text;

        } catch (err) {
            console.error(err);
            return "Error: " + err.message;
        }
    }

    async function startChat() {
        const text = input.value.trim();
        if (!text) return;

        addBubble('user', text);
        input.value = "";
        sendBtn.disabled = true;

        const aiBubble = addBubble('ai', "Thinking...");
        const response = await fetchAI(text);
        
        aiBubble.innerText = response;
        sendBtn.disabled = false;
        input.focus();
    }

    sendBtn.onclick = startChat;
    input.onkeypress = (e) => { if(e.key === 'Enter') startChat(); };
</script>

</body>
</html>
